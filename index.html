<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EnergiAi</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  /* ===== GLOBAL STYLES ===== */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f5f7fb;
    color: #333;
    margin: 0;
    padding: 0;
  }
  h1, h2 {
    color: #1f2937;
  }
  button {
    background-color: #4f46e5;
    color: white;
    border: none;
    padding: 12px 24px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 8px;
    transition: 0.3s;
  }
  button:hover {
    background-color: #4338ca;
  }
  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 30px 20px;
  }
  .dashboard {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-top: 30px;
  }
  .card {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
  }
  .stats p {
    font-size: 18px;
    margin: 8px 0;
  }
  #suggestions {
    font-weight: bold;
    color: #f97316; /* orange highlight */
    animation: pulse 2s infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
  }
  ul {
    padding-left: 20px;
  }
  canvas {
    background: #fff;
    border-radius: 12px;
    padding: 10px;
  }
  footer {
    text-align: center;
    margin-top: 50px;
    color: #6b7280;
  }
</style>
</head>
<body>

<div class="container">
  <h1>AI Power Optimizer</h1>
  <p>Track your device usage, optimize your energy costs, and get smart AI suggestions.</p>

  <!-- Buttons -->
  <div style="margin-top:20px;">
    <button id="startBtn">Start Tracking</button>
    <button id="stopBtn" disabled>Stop Tracking</button>
  </div>

  <!-- Stats Cards -->
  <div class="dashboard">
    <div class="card stats">
      <h2>Usage Stats</h2>
      <p>Time Used: <span id="timeUsed">0</span> minutes</p>
      <p>Estimated Cost: $<span id="cost">0.00</span></p>
      <p>Predicted Monthly Cost: $<span id="predictedCost">0.00</span></p>
      <p>AI Suggestions: <span id="suggestions">---</span></p>
    </div>

    <div class="card">
      <h2>Personalized Energy-Saving Plan</h2>
      <ul id="energyPlan"></ul>
    </div>
  </div>

  <!-- Usage Chart -->
  <div class="card" style="margin-top:30px;">
    <h2>Usage Dashboard</h2>
    <canvas id="usageChart" width="400" height="200"></canvas>
  </div>
</div>

<footer>
  &copy; 2026 AI Power Optimizer. All rights reserved.
</footer>

<script>
let startTime, interval;
const powerWatts = 60;
const costPerKWh = 0.13;
let usageData = JSON.parse(localStorage.getItem('powerHistory') || "[]");

// Chart
const ctx = document.getElementById('usageChart').getContext('2d');
const usageChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: usageData.map(d => d.date),
        datasets: [{
            label: 'Cost ($)',
            data: usageData.map(d => d.cost),
            borderColor: '#4f46e5',
            backgroundColor: 'rgba(79,70,229,0.2)',
            tension: 0.3,
            fill: true
        }]
    },
    options: { responsive: true, scales: { y: { beginAtZero: true } } }
});

// Buttons
document.getElementById('startBtn').onclick = () => {
    startTime = Date.now();
    interval = setInterval(updateStats, 1000);
    document.getElementById('startBtn').disabled = true;
    document.getElementById('stopBtn').disabled = false;
};

document.getElementById('stopBtn').onclick = () => {
    clearInterval(interval);
    document.getElementById('startBtn').disabled = false;
    document.getElementById('stopBtn').disabled = true;
    saveStats();
};

function updateStats() {
    let minutes = Math.floor((Date.now() - startTime) / 60000);
    document.getElementById('timeUsed').innerText = minutes;

    let kWh = (powerWatts / 1000) * (minutes / 60);
    let cost = (kWh * costPerKWh).toFixed(2);
    document.getElementById('cost').innerText = cost;

    // Dynamic AI suggestions
    let suggestions = [];
    if (minutes >= 60) suggestions.push("Active for over an hour – take a break.");
    if (minutes >= 120) suggestions.push("Dim screen brightness or close unused apps.");
    if (new Date().getHours() >= 18) suggestions.push("Evening usage is costly – consider turning off devices.");
    if (suggestions.length === 0) suggestions.push("Great energy-efficient usage!");
    document.getElementById('suggestions').innerText = suggestions.join(" ");

    // Predict monthly cost
    let totalCost = usageData.reduce((sum, d) => sum + parseFloat(d.cost), 0) + parseFloat(cost);
    let avgDailyCost = totalCost / (usageData.length + 1);
    document.getElementById('predictedCost').innerText = (avgDailyCost * 30).toFixed(2);

    // Update energy plan
    generateEnergyPlan(minutes);
}

function saveStats() {
    let minutes = Math.floor((Date.now() - startTime) / 60000);
    let cost = ((powerWatts / 1000) * (minutes / 60) * costPerKWh).toFixed(2);
    usageData.push({ minutes, cost, date: new Date().toLocaleString() });
    localStorage.setItem('powerHistory', JSON.stringify(usageData));

    // Update chart
    usageChart.data.labels = usageData.map(d => d.date);
    usageChart.data.datasets[0].data = usageData.map(d => d.cost);
    usageChart.update();

    alert(`Session saved! You used ${minutes} minutes, costing $${cost}`);
}

function generateEnergyPlan(minutes) {
    let plan = [];
    if (minutes >= 60) plan.push("Take a 10-minute break every hour to save energy.");
    if (minutes >= 90) plan.push("Reduce screen brightness to 70% or close unused apps.");
    if (new Date().getHours() >= 18) plan.push("Avoid heavy usage during evening peak hours.");
    if (minutes < 60) plan.push("Keep up your efficient usage habits!");
    document.getElementById('energyPlan').innerHTML = plan.map(item => `<li>${item}</li>`).join('');
}
</script>

</body>
</html>
